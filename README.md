# Lights-Rails

Lights-Rails is a Ruby on Rails app that serves as the backend for the [Lights iOS app](https://github.com/edc1591/Lights-iOS) that allows you to control RGB LEDs and X10 devices.

## Links

* Documentation: <https://github.com/edc1591/lights-rails/wiki>
* Lights iOS app: <https://github.com/edc1591/Lights-iOS>
* Lights bridge apps: <https://github.com/edc1591/lights-bridge>

## Installation

This app is designed to be easily deployed to a service like Heroku. Serveral environmental variables must be set:

1. `LIGHTS_SECRET` is the standard Rails secret token which you can generate by running `rake secret`.
2. `DEVISE_SECRET` which is the secret used by the [Devise gem](https://github.com/plataformatec/devise) which can also be generated by running `rake secret`.
3. `DEVISE_SENDER` is the email address used by Devise.
4. `EXCEPTION_SENDER` is the email address to send exception notifications from.
5. `EXCEPTION_RECIPIENT` is the email address to send exception notifications to.

Install dependencies

    bundle install

Create and seed the database

    rake db:setup
    
And run the server

    bundle exec thin start


## Usage

You'll probably want to start by adding some users and X10 devices. This can all be done using Active Admin. Point your browser to `http://localhost:3000/admin` and login using "admin@example.com" as the username and "password" as the password. From here, you can create all the necessary models. You'll also probably want to change the default admin username and password. This would be the "Admin User" model.

**TODO:** Make the `User` model editable in the admin panel.

## Contributing

1. Fork it!
2. Create your feature branch: `git checkout -b my-new-feature`
3. Commit your changes: `git commit -am 'Add some feature'`
4. Push to the branch: `git push origin my-new-feature`
5. Submit a pull request :D

## Dependencies

Tool                    | Description
----------------------- | -----------
[Active Admin]          | Administration framework
[Websocket-Rails]       | Websocket framework
[Exception Notification]| Exception emails

[Active Admin]: https://github.com/gregbell/activeadmin
[Websocket-Rails]: https://github.com/websocket-rails/websocket-rails
[Exception Notification]: https://github.com/smartinez87/exception_notification

## License

Copyright (c) 2014 Evan Coleman, released under the [MIT license](LICENSE).